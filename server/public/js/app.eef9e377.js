(function(){"use strict";var e={8375:function(e,a,t){var i=t(5130),s=t(6768);function l(e,a){const t=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(t)}var n=t(1241);const o={},d=(0,n.A)(o,[["render",l]]);var u=d,r=t(1387),c=(t(4114),t(4232)),v=t(144),k=t(4373),_=t(1219),h=t(782),m=(0,h.y$)({state:{is_login:!1,is_get_router:!1,is_collapsed:!1,cur_page:"/habitai"},getters:{},mutations:{changeLogin(e,a){e.is_login=a,localStorage.removeItem("chatContents")},changeGetRouter(e,a){e.is_get_router=a},changeCollapsed(e,a){e.is_collapsed=a},changeCurPage(e,a){e.cur_page=a}},actions:{},modules:{}});const p=e=>((0,s.Qi)("data-v-16447114"),e=e(),(0,s.jt)(),e),b={class:"body-bg"},g={class:"formContainer_signin"},L=p((()=>(0,s.Lk)("div",{class:"formTitle",style:{"margin-top":"20px"}},"Let's begin!",-1))),C={class:"button-flex-container",style:{"margin-top":"60px"}},y={class:"formContainer_signup"},f=p((()=>(0,s.Lk)("div",{class:"formTitle",style:{"margin-top":"20px"}},"Sign up first!",-1))),w={class:"button-flex-container",style:{"margin-top":"30px"}};var R={__name:"Login",setup(e){const a=(0,v.Kh)({username:"",password:""}),t=(0,v.Kh)({signup_username:"",signup_password_1:"",signup_password_2:""}),l=(0,v.KR)(),n=(0,v.KR)();let o=(0,v.KR)(!0),d=(0,v.KR)(!0),u=(0,v.KR)(!0),h=(0,v.KR)(!0);const p=(0,r.rd)(),R=()=>{l.value.validate((e=>{if(e){if(console.log(a),!a.password||!a.username)return void _.nk.error("Please enter your username and password!");k.A.post("/adminapi/user/login",a).then((e=>{console.log(e.data),"OK"===e.data.ActionType?(m.commit("changeLogin",!0),localStorage.setItem("token",e.data.token),p.push("/habitai")):_.nk.error("Incorrect username or password!")}))}}))},E=()=>{n.value.validate((e=>{if(e){if(console.log(t),!t.signup_username||!t.signup_password_1||!t.signup_password_2)return void _.nk.error("Please enter your username and password!");if(t.signup_password_1!==t.signup_password_2)return void _.nk.error("Please enter the same password!");if(t.signup_username.length>20||t.signup_username.length>20)return void _.nk.error("Limitation: 20 characters");k.A.post("/adminapi/user/signup",t).then((e=>{console.log(e.data),"OK"===e.data.ActionType?(_.nk.success("Sign up success! Please sign in again."),setTimeout((()=>{h.value=!0}),1e3)):"REPEAT"===e.data.ActionType&&_.nk.error("This username is already taken.")}))}}))},S=()=>{o.value=!0},K=()=>{o.value=!1},I=()=>{d.value=!0},T=()=>{d.value=!1},A=()=>{u.value=!0},x=()=>{u.value=!1},F=()=>{h.value=!h.value};return(e,r)=>{const k=(0,s.g2)("el-form");return(0,s.uX)(),(0,s.CE)("div",b,[(0,s.bo)((0,s.Lk)("div",g,[L,(0,s.bF)(k,{ref_key:"signinFormRef",ref:l,model:a,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,v.R1)(o)}]),style:{"margin-bottom":"40px","margin-top":"40px"},onFocus:K,onBlur:S,"onUpdate:modelValue":r[0]||(r[0]=e=>a.username=e),autocomplete:"off",placeholder:"User name"},null,34),[[i.Jo,a.username]]),(0,s.bo)((0,s.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,v.R1)(d)}]),onFocus:T,onBlur:I,"onUpdate:modelValue":r[1]||(r[1]=e=>a.password=e),type:"password",autocomplete:"off",placeholder:"Password"},null,34),[[i.Jo,a.password]])])),_:1},8,["model"]),(0,s.Lk)("div",C,[(0,s.Lk)("button",{class:"sign_button",style:{"margin-right":"50px"},type:"primary",onClick:r[2]||(r[2]=e=>R())}," Sign in "),(0,s.Lk)("button",{class:"sign_button",type:"primary",onClick:r[3]||(r[3]=e=>F())}," Sign up ")])],512),[[i.aG,(0,v.R1)(h)]]),(0,s.bo)((0,s.Lk)("div",y,[f,(0,s.bF)(k,{ref_key:"signupFormRef",ref:n,model:t,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,v.R1)(o)}]),style:{"margin-bottom":"20px","margin-top":"20px"},onFocus:K,onBlur:S,"onUpdate:modelValue":r[4]||(r[4]=e=>t.signup_username=e),autocomplete:"off",placeholder:"User name"},null,34),[[i.Jo,t.signup_username]]),(0,s.bo)((0,s.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,v.R1)(d)}]),style:{"margin-bottom":"20px"},onFocus:T,onBlur:I,"onUpdate:modelValue":r[5]||(r[5]=e=>t.signup_password_1=e),type:"password",autocomplete:"off",placeholder:"Password"},null,34),[[i.Jo,t.signup_password_1]]),(0,s.bo)((0,s.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,v.R1)(u)}]),onFocus:x,onBlur:A,"onUpdate:modelValue":r[6]||(r[6]=e=>t.signup_password_2=e),type:"password",autocomplete:"off",placeholder:"Password again"},null,34),[[i.Jo,t.signup_password_2]])])),_:1},8,["model"]),(0,s.Lk)("div",w,[(0,s.Lk)("button",{class:"sign_button",style:{"margin-right":"50px"},type:"primary",onClick:r[7]||(r[7]=e=>E())}," Ok "),(0,s.Lk)("button",{class:"sign_button",type:"primary",onClick:r[8]||(r[8]=e=>F())}," Back ")])],512),[[i.aG,!(0,v.R1)(h)]])])}}};const E=(0,n.A)(R,[["__scopeId","data-v-16447114"]]);var S=E;const K=e=>((0,s.Qi)("data-v-3a65e402"),e=e(),(0,s.jt)(),e),I=K((()=>(0,s.Lk)("span",null,"HABIT AI",-1))),T=[I],A=K((()=>(0,s.Lk)("span",null,"MY HABITS",-1))),x=[A],F=K((()=>(0,s.Lk)("span",null,"USER",-1))),O=[F],M=K((()=>(0,s.Lk)("span",null,"ABOUT",-1))),X=[M],U=K((()=>(0,s.Lk)("span",null,"SIGN OUT",-1))),D=[U];var B={__name:"SideMenu",setup(e){const a=(0,r.rd)(),t=e=>{a.push(e),m.commit("changeCollapsed",!1),m.commit("changeCurPage",e)},i=()=>{localStorage.removeItem("token"),m.commit("changeCollapsed",!1),a.push("/login")};return(e,a)=>{const l=(0,s.g2)("el-aside");return(0,s.uX)(),(0,s.Wv)(l,null,{default:(0,s.k6)((()=>[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>t("/habitai"))},T),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>t("/myhabitsmenu"))},x),(0,s.Lk)("button",{onClick:a[2]||(a[2]=e=>t("/center"))},O),(0,s.Lk)("button",{onClick:a[3]||(a[3]=e=>t("/center"))},X),(0,s.Lk)("button",{onClick:i},D)])),_:1})}}};const P=(0,n.A)(B,[["__scopeId","data-v-3a65e402"]]);var j=P;const V={class:"main-container"},H=(0,s.Lk)("span",{class:"overlay-text-1"},"STICK TO YOUR HABITS",-1),Q=(0,s.Lk)("div",{class:"menu-back-decorate"},null,-1),N=(0,s.Lk)("div",{class:"menu-back-decorate-tiktok"},null,-1),W=[H,Q,N],$={class:"main-content"};var q={__name:"MainBox",setup(e){const a=()=>{m.state.is_collapsed?m.commit("changeCollapsed",!1):m.commit("changeCollapsed",!0)};return(e,t)=>{const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",{class:"header-container"},[(0,s.Lk)("button",{class:"menu-button",onClick:a}," MENU ")]),(0,v.R1)(m).state.is_collapsed?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"overlay",onClick:a},W)):(0,s.Q3)("",!0),(0,s.bF)(i.eB,{name:"slide"},{default:(0,s.k6)((()=>[(0,v.R1)(m).state.is_collapsed?((0,s.uX)(),(0,s.Wv)(j,{key:0,class:(0,c.C4)(["side-menu",{"is-visible":(0,v.R1)(m).state.is_collapsed}])},null,8,["class"])):(0,s.Q3)("",!0)])),_:1}),(0,s.Lk)("div",$,[(0,s.bF)(l)])])}}};const J=q;var Y=J;function z(e,a){const t=(0,s.g2)("el-empty");return(0,s.uX)(),(0,s.Wv)(t,{description:"404 not found"})}const G={},Z=(0,n.A)(G,[["render",z]]);var ee=Z,ae=t(642);const te=e=>((0,s.Qi)("data-v-77a37270"),e=e(),(0,s.jt)(),e),ie={class:"input-and-send"},se=["loading"],le={class:"chat-list"},ne=te((()=>(0,s.Lk)("div",{class:"message-me"},"me: ",-1))),oe={class:"me-message"},de=te((()=>(0,s.Lk)("div",{style:{height:"1vh"}},null,-1))),ue=te((()=>(0,s.Lk)("div",{class:"message-bot"},"habitAI:",-1))),re=["innerHTML"],ce=te((()=>(0,s.Lk)("div",{style:{height:"1vh"}},null,-1)));var ve={__name:"Home",setup(e){const a=new ae.A;let t=(0,v.KR)(!1);const l=(0,v.Kh)({my_question:""});let n="";const o=(0,v.KR)([]),d=[];let u=!1;(0,s.sV)((()=>{const e=localStorage.getItem("chatContents");e&&(o.value=JSON.parse(e))})),(0,s.xo)((()=>{localStorage.setItem("chatContents",JSON.stringify(o.value))})),window.addEventListener("beforeunload",(()=>{localStorage.removeItem("chatContents")}));const r=()=>{let e=l.my_question.trim();e&&!t.value&&(l.my_question="",t.value=!0,k.A.post("/adminapi/user/sendquestion",{question:e},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((a=>{let i=a.data.questionId;if(i){let a=(0,v.KR)(""),s=(0,v.KR)("");o.value.push({user:e,ai:a,ui:s});const l=new EventSource(`/adminapi/user/getanswer/${i}`);l.onmessage=e=>{const a=decodeURIComponent(e.data);console.log(a),d.push(a),u||h()},l.onerror=()=>{console.log(n),l.close(),t.value=!1},l.onclose=()=>{t.value=!1}}})).catch((e=>{console.error("Error sending question: ",e),_.nk.error("Something error..."),t.value=!1})))},h=()=>{if(0===d.length)return void(u=!1);u=!0;const e=d.shift();console.log("mess___________: ",e);let t=0;const i=30,s=10,l=70,r=o.value[o.value.length-1];n+=e;const c=()=>{t<e.length?(r.ai+=e.charAt(t),r.ui=a.render(r.ai),t++,setTimeout(c,Math.max(s,Math.min(l,i-2*e.length)))):h()};c()};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ie,[(0,s.bo)((0,s.Lk)("input",{class:"question-input",type:"textarea",placeholder:"","onUpdate:modelValue":a[0]||(a[0]=e=>l.my_question=e),maxlength:"500","show-word-limit":"",autosize:{minRows:2},resize:"none"},null,512),[[i.Jo,l.my_question]]),(0,s.Lk)("button",{class:"question-button",onClick:r,type:"primary",loading:(0,v.R1)(t)},(0,c.v_)((0,v.R1)(t)?"...":"send"),9,se)]),(0,s.Lk)("div",le,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a},[(0,s.Lk)("div",null,[ne,(0,s.Lk)("div",oe,(0,c.v_)(e.user),1)]),de,(0,s.Lk)("div",null,[ue,(0,s.Lk)("div",{class:"bot-message",innerHTML:e.ui},null,8,re)]),ce])))),128))])],64))}};const ke=(0,n.A)(ve,[["__scopeId","data-v-77a37270"]]);var _e=ke;function he(e,a){return(0,s.uX)(),(0,s.CE)("div",null," center ")}const me={},pe=(0,n.A)(me,[["render",he]]);var be=pe;const ge=e=>((0,s.Qi)("data-v-7f6ec81d"),e=e(),(0,s.jt)(),e),Le={class:"card-info"},Ce={class:"card-info-content"},ye=ge((()=>(0,s.Lk)("div",{class:"card-5"},null,-1))),fe=ge((()=>(0,s.Lk)("span",{class:"card-word-0"},"HISTORY",-1))),we=[fe],Re=ge((()=>(0,s.Lk)("span",{class:"card-word-1"},"RECORD",-1))),Ee=[Re],Se=ge((()=>(0,s.Lk)("span",{class:"card-word-2"},"EDIT",-1))),Ke=[Se],Ie=ge((()=>(0,s.Lk)("span",{class:"card-word-3"},"VIEW",-1))),Te=[Ie],Ae=ge((()=>(0,s.Lk)("div",{class:"card-4"},[(0,s.Lk)("span",{class:"card-word-cover"},"MY HABITS")],-1))),xe={class:"card-main"},Fe={class:"main-content"},Oe="-- View my habits --",Me="-- Edit my habits --",Xe="--  View habit maintenance records --",Ue="-- View completed habits --";var De={__name:"MyHabitsMenu",setup(e){const a=(0,r.rd)();let t=(0,v.KR)([!1,!1,!1,!1]),l=(0,v.KR)(!1),n=(0,v.KR)("");(0,s.sV)((()=>{}));const o=()=>{l.value=!1;for(let e=0;e<4;e++)t.value[e]=!1},d=e=>{n.value=e},u=e=>{switch(e){case 3:a.push("/habitsview");break;case 2:a.push("/habitsedit");break;case 1:a.push("/habitsrecord");break;case 0:a.push("/habitshistory");break;default:break}for(let a=0;a<4;a++)t.value[a]=a===e&&!t.value[a];l.value=t.value[0]||t.value[1]||t.value[2]||t.value[3]};return(e,a)=>{const r=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Le,[(0,s.Lk)("span",Ce,(0,c.v_)((0,v.R1)(n)),1)]),ye,(0,s.Lk)("div",{class:(0,c.C4)(["card-0",{clicked:(0,v.R1)(t)[0]}]),onClick:a[0]||(a[0]=e=>u(0)),onMouseenter:a[1]||(a[1]=e=>d(Ue)),onMouseleave:a[2]||(a[2]=e=>d(""))},we,34),(0,s.Lk)("div",{class:(0,c.C4)(["card-1",{clicked:(0,v.R1)(t)[1]}]),onClick:a[3]||(a[3]=e=>u(1)),onMouseenter:a[4]||(a[4]=e=>d(Xe)),onMouseleave:a[5]||(a[5]=e=>d(""))},Ee,34),(0,s.Lk)("div",{class:(0,c.C4)(["card-2",{clicked:(0,v.R1)(t)[2]}]),onClick:a[6]||(a[6]=e=>u(2)),onMouseenter:a[7]||(a[7]=e=>d(Me)),onMouseleave:a[8]||(a[8]=e=>d(""))},Ke,34),(0,s.Lk)("div",{class:(0,c.C4)(["card-3",{clicked:(0,v.R1)(t)[3]}]),onClick:a[9]||(a[9]=e=>u(3)),onMouseenter:a[10]||(a[10]=e=>d(Oe)),onMouseleave:a[11]||(a[11]=e=>d(""))},Te,34),Ae,(0,s.bo)((0,s.Lk)("button",{class:"close-button",onClick:o},"CLOSE",512),[[i.aG,(0,v.R1)(l)]]),(0,s.bo)((0,s.Lk)("div",xe,[(0,s.Lk)("div",Fe,[(0,s.bF)(r)])],512),[[i.aG,(0,v.R1)(l)]])],64)}}};const Be=(0,n.A)(De,[["__scopeId","data-v-7f6ec81d"]]);var Pe=Be;const je=e=>((0,s.Qi)("data-v-537d29a0"),e=e(),(0,s.jt)(),e),Ve=je((()=>(0,s.Lk)("div",{class:"side"},null,-1))),He=je((()=>(0,s.Lk)("div",{class:"middle"},null,-1))),Qe={class:"habit-list"},Ne=["onClick"],We={class:"habit-name"},$e={class:"describe-card"},qe={key:0,class:"des-main"},Je={class:"des-habit"},Ye={class:"des-date"},ze={class:"des-day"},Ge={class:"des-time"},Ze={class:"des-when"},ea={class:"des-long"},aa={class:"des-keep"};var ta={__name:"habitsView",setup(e){const a=(0,r.rd)(),t=(0,v.KR)([]),i=(0,v.KR)(-1),l=new Date;l.getFullYear(),("0"+(l.getMonth()+1)).slice(-2),("0"+l.getDate()).slice(-2);(0,s.sV)((()=>{k.A.get("/adminapi/user/browsehabits",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{if(401===e.data.code)_.nk.error("User info error! Please sign in again."),localStorage.removeItem("token"),setTimeout((()=>{a.push("/login")}),1e3);else if(e.data){console.log(e.data);for(let a=0;a<e.data.body.length;a++)t.value.push({user_habit:e.data.body[a].user_habit,habit_id:e.data.body[a].habit_id,habit_week:e.data.body[a].habit_week,habit_begin_date:e.data.body[a].habit_begin_date,habit_end_date:e.data.body[a].habit_end_date,habit_start_time:e.data.body[a].habit_start_time,habit_dur_time:e.data.body[a].habit_dur_time,habit_keep_record:e.data.body[a].habit_keep_record,habit_last_update:e.data.body[a].habit_last_update,is_complete:e.data.body[a].is_complete})}}))}));const n=e=>{i.value===e?i.value=-1:i.value=e};return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[Ve,He,(0,s.Lk)("div",Qe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a},[(0,s.Lk)("div",{class:(0,c.C4)(["habit-card",{selected:i.value===a}]),onClick:e=>n(a)},[(0,s.Lk)("div",We,(0,c.v_)(e.user_habit),1)],10,Ne)])))),128))]),(0,s.Lk)("div",$e,[t.value&&t.value.length>0&&-1!=i.value?((0,s.uX)(),(0,s.CE)("div",qe,[(0,s.Lk)("div",Je,(0,c.v_)(t.value[i.value].user_habit.toUpperCase()),1),(0,s.Lk)("div",Ye,(0,c.v_)(t.value[i.value].habit_begin_date)+" -- "+(0,c.v_)(t.value[i.value].habit_end_date),1),(0,s.Lk)("div",ze,[(0,s.Lk)("div",{class:(0,c.C4)({red_day:1&t.value[i.value].habit_week})},"SUN",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:2&t.value[i.value].habit_week})},"MON",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:4&t.value[i.value].habit_week})},"TUE",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:8&t.value[i.value].habit_week})},"WED",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:16&t.value[i.value].habit_week})},"THU",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:32&t.value[i.value].habit_week})},"FRI",2),(0,s.Lk)("div",{class:(0,c.C4)({red_day:64&t.value[i.value].habit_week})},"SAT",2)]),(0,s.Lk)("div",Ge,[(0,s.Lk)("div",Ze,(0,c.v_)(t.value[i.value].habit_start_time.substring(0,5)),1),(0,s.Lk)("div",ea,(0,c.v_)(t.value[i.value].habit_dur_time)+"min",1)]),(0,s.Lk)("div",aa,"KEPT IT UP FOR "+(0,c.v_)(t.value[i.value].habit_keep_record)+" DAYS",1)])):(0,s.Q3)("",!0)])],64))}};const ia=(0,n.A)(ta,[["__scopeId","data-v-537d29a0"]]);var sa=ia;const la=e=>((0,s.Qi)("data-v-193d0e88"),e=e(),(0,s.jt)(),e),na={class:"h-body"},oa=la((()=>(0,s.Lk)("div",{class:"side"},null,-1))),da={class:"habit-container"},ua={class:"habit-list"},ra={class:"habit-name"},ca={class:"habit-date"},va=la((()=>(0,s.Lk)("div",{class:"from"},"FROM ",-1))),ka=["onClick"],_a=la((()=>(0,s.Lk)("div",null," TO ",-1))),ha=["onClick"],ma={class:"habit-week"},pa=["onClick"],ba=["onClick"],ga=["onClick"],La=["onClick"],Ca=["onClick"],ya=["onClick"],fa=["onClick"],wa={class:"habit-when"},Ra=["onClick"],Ea=["onClick"],Sa=la((()=>(0,s.Lk)("div",{style:{"font-size":"5vh"}},"min",-1))),Ka=la((()=>(0,s.Lk)("div",null,null,-1))),Ia={class:"habit-delete-contain"},Ta=["onClick"],Aa={key:0,class:"edit-date-card"},xa={class:"edit-date-yyyy"},Fa={class:"edit-date-mm"},Oa={class:"chosen-mm"},Ma=la((()=>(0,s.Lk)("div",{class:"mm-i"},null,-1))),Xa=la((()=>(0,s.Lk)("div",{class:"mm-i"},null,-1))),Ua=la((()=>(0,s.Lk)("div",{class:"mm-shadow"},null,-1))),Da=(0,s.Fv)('<div class="dd-week" data-v-193d0e88>Sun</div><div class="dd-week" data-v-193d0e88>Mon</div><div class="dd-week" data-v-193d0e88>Tue</div><div class="dd-week" data-v-193d0e88>Wed</div><div class="dd-week" data-v-193d0e88>Thu</div><div class="dd-week" data-v-193d0e88>Fri</div><div class="dd-week" data-v-193d0e88>Sat</div>',7),Ba=["onClick"],Pa={key:1,class:"edit-time-card"},ja={class:"hour-change"},Va={class:"edit-time-back"},Ha=la((()=>(0,s.Lk)("div",{class:"edit-time-middle"},":",-1))),Qa={class:"edit-time-back"},Na={class:"hour-change"},Wa={key:2,class:"edit-dur-card"},$a=la((()=>(0,s.Lk)("div",{class:"dur-backg"},null,-1))),qa=la((()=>(0,s.Lk)("div",{class:"dur-input-container"},[(0,s.Lk)("input",{class:"dur-input",type:"text",maxlength:"3",id:"input_dur",value:"60"}),(0,s.Lk)("div",{class:"dur-min"}," min")],-1))),Ja=[$a,qa],Ya=la((()=>(0,s.Lk)("div",{class:"dur-ok-backg"},null,-1))),za=la((()=>(0,s.Lk)("div",{class:"dur-input-ok"},"OK ",-1))),Ga=[Ya,za],Za={key:4,class:"habit-add-card"};var et={__name:"habitsEdit",setup(e){const a=(0,r.rd)(),t=(0,v.KR)([]);(0,s.sV)((()=>{k.A.get("/adminapi/user/browsehabits",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{if(401===e.data.code)_.nk.error("User info error! Please sign in again."),localStorage.removeItem("token"),setTimeout((()=>{a.push("/login")}),1e3);else if(e.data){console.log(e.data);for(let a=0;a<e.data.body.length;a++)t.value.push({user_habit:e.data.body[a].user_habit,habit_id:e.data.body[a].habit_id,habit_week:e.data.body[a].habit_week,habit_begin_date:e.data.body[a].habit_begin_date,habit_end_date:e.data.body[a].habit_end_date,habit_start_time:e.data.body[a].habit_start_time,habit_dur_time:e.data.body[a].habit_dur_time,habit_keep_record:e.data.body[a].habit_keep_record,habit_last_update:e.data.body[a].habit_last_update,is_complete:e.data.body[a].is_complete,is_edited:!1,is_deleted:!1})}}))}));const i=new Date,l=i.getFullYear(),n=i.getMonth()+1,o=(i.getDate(),i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2));let d=(0,v.KR)(l),u=(0,v.KR)(0),h=(0,v.KR)(0),m=(0,v.KR)(0),p=(0,v.KR)(0),b=(0,v.KR)(!1),g=(0,v.KR)(-1),L=(0,v.KR)(-1),C=(0,v.KR)(0);const y=(e,a)=>{A.value||j.value||(g.value===e&&L.value===a?(g.value=-1,L.value=-1,b.value=!1):(g.value=e,L.value=a,b.value=!0,C.value=n,d.value=l,u.value=n))},f=(e,a)=>{t.value[e].habit_week^=a,t.value[e].is_edited=!0},w=e=>{d.value=e?l+1:l},R=e=>{C.value=e?C.value%12+1:(C.value+10)%12+1,u.value=C.value},E=e=>{if(e<=0)return void R(0);if(e>h.value)return void R(1);p.value=e,u.value=C.value;let a=new Date(d.value+"-"+("0"+u.value).slice(-2)+"-"+("0"+p.value).slice(-2));if(L.value){let e=new Date(t.value[g.value].habit_begin_date);t.value[g.value].habit_end_date=a<e?t.value[g.value].habit_begin_date:a<i?o:d.value+"-"+("0"+u.value).slice(-2)+"-"+("0"+p.value).slice(-2)}else{let e=new Date(t.value[g.value].habit_end_date);t.value[g.value].habit_begin_date=a>e?t.value[g.value].habit_end_date:a<i?o:d.value+"-"+("0"+u.value).slice(-2)+"-"+("0"+p.value).slice(-2)}t.value[g.value].is_edited=!0,g.value=-1,L.value=-1,b.value=!1},S=(0,s.EW)((()=>({transform:`translateX(${-(2*C.value-1)/28*100}%)`}))),K=(0,s.EW)((()=>({"grid-template-rows":`repeat(${h.value+m.value<36?6:7}, 1fr)`}))),I=(e,a)=>new Date(e,a,0).getDate(),T=(e,a)=>{var t=new Date(e,a-1,1);return t.getDay()};(0,s.wB)([d,u],(([e,a])=>{h.value=I(e,a),m.value=T(e,a),console.log("how many ",h.value," first",m.value)}));const A=(0,v.KR)(!1),x=(0,v.KR)(-1),F=(0,v.KR)(9),O=(0,v.KR)(0),M=(0,s.EW)((()=>({transform:`translateY(${-(19-F.value)/24*100}%)`}))),X=(0,s.EW)((()=>({transform:`translateY(${-(55-O.value)/60*100}%)`}))),U=e=>{F.value=(F.value+e+24)%24},D=e=>{O.value=(O.value+e+60)%60},B=e=>{b.value||j.value||(x.value===e?(x.value=-1,A.value=!1):(F.value=9,O.value=0,x.value=e,A.value=!0))},P=()=>{t.value[x.value].habit_start_time=`${F.value.toString().padStart(2,"0")}:${O.value.toString().padStart(2,"0")}`,F.value=9,O.value=0,t.value[x.value].is_edited=!0,x.value=-1,A.value=!1},j=(0,v.KR)(!1),V=(0,v.KR)(-1),H=(0,v.KR)(60),Q=e=>{b.value||A.value||(V.value===e?(V.value=-1,j.value=!1):(H.value=60,V.value=e,j.value=!0))},N=()=>{t.value[V.value].habit_dur_time=Number(document.getElementById("input_dur").value),t.value[V.value].is_edited=!0,V.value=-1,j.value=!1},W=e=>{b.value||A.value||j.value||(t.value[e].is_deleted=!t.value[e].is_deleted)},$=()=>{if(b.value||A.value||j.value)return;let e=[],a=[];for(let i=0;i<t.value.length;i++)(t.value[i].is_edited||t.value[i].is_deleted)&&(a.push(t.value[i].habit_id),e.push({habit_id:t.value[i].habit_id,habit_week:t.value[i].habit_week,habit_begin_date:t.value[i].habit_begin_date,habit_end_date:t.value[i].habit_end_date,habit_start_time:t.value[i].habit_start_time,habit_dur_time:t.value[i].habit_dur_time,is_edited:t.value[i].is_edited,is_deleted:t.value[i].is_deleted}));e.length?k.A.post("/adminapi/user/savehabit",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{if(!e.data.code){for(let e=0;e<a.length;e++)t.value[t.value.findIndex((t=>t.habit_id===a[e]))].is_deleted?t.value.splice(t.value.findIndex((t=>t.habit_id===a[e])),1):t.value[t.value.findIndex((t=>t.habit_id===a[e]))].is_edited=!1;_.nk.success("Saved!")}})):_.nk.error("Nothing need to be saved.")},q=(0,v.KR)(!1);return(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",na,[(0,s.Lk)("button",{class:"save-button",onClick:a[0]||(a[0]=e=>$())},"SAVE"),(0,s.Lk)("button",{class:"add-button",onClick:a[1]||(a[1]=a=>e.addHabit())},"ADD"),oa,(0,s.Lk)("div",da,[(0,s.Lk)("div",ua,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a},[(0,s.Lk)("div",{class:(0,c.C4)(["habit-card",{deleted:t.value[a].is_deleted}])},[(0,s.Lk)("div",ra,(0,c.v_)(e.user_habit),1),(0,s.Lk)("div",ca,[va,(0,s.Lk)("div",{class:(0,c.C4)(["edit-habit-date",{selected:(0,v.R1)(g)===a&&0===(0,v.R1)(L)}]),onClick:e=>y(a,0)},"  "+(0,c.v_)(e.habit_begin_date)+"  ",11,ka),_a,(0,s.Lk)("div",{class:(0,c.C4)(["edit-habit-date",{selected:(0,v.R1)(g)===a&&1===(0,v.R1)(L)}]),onClick:e=>y(a,1)},"  "+(0,c.v_)(e.habit_end_date)+"  ",11,ha)]),(0,s.Lk)("div",ma,[(0,s.Lk)("div",{class:(0,c.C4)({red_day:1&e.habit_week}),onClick:e=>f(a,1)},"SUN",10,pa),(0,s.Lk)("div",{class:(0,c.C4)({red_day:2&e.habit_week}),onClick:e=>f(a,2)},"MON ",10,ba),(0,s.Lk)("div",{class:(0,c.C4)({red_day:4&e.habit_week}),onClick:e=>f(a,4)},"TUE ",10,ga),(0,s.Lk)("div",{class:(0,c.C4)({red_day:8&e.habit_week}),onClick:e=>f(a,8)}," WED ",10,La),(0,s.Lk)("div",{class:(0,c.C4)({red_day:16&e.habit_week}),onClick:e=>f(a,16)}," THU ",10,Ca),(0,s.Lk)("div",{class:(0,c.C4)({red_day:32&e.habit_week}),onClick:e=>f(a,32)},"FRI",10,ya),(0,s.Lk)("div",{class:(0,c.C4)({red_day:64&e.habit_week}),onClick:e=>f(a,64)},"SAT",10,fa)]),(0,s.Lk)("div",wa,[(0,s.Lk)("div",{class:(0,c.C4)(["habit-start-time",{selected:x.value===a}]),onClick:e=>B(a)},(0,c.v_)(e.habit_start_time),11,Ra),(0,s.Lk)("div",{class:(0,c.C4)(["habit-dur-time",{selected:V.value===a}]),onClick:e=>Q(a)},(0,c.v_)(e.habit_dur_time),11,Ea),Sa]),Ka,(0,s.Lk)("div",Ia,[(0,s.Lk)("div",{class:"habit-delete",onClick:e=>W(a)},(0,c.v_)(t.value[a].is_deleted?"RESTORE":"DELETE"),9,Ta)])],2)])))),128))])])]),(0,v.R1)(b)?((0,s.uX)(),(0,s.CE)("div",Aa,[(0,s.Lk)("div",xa,[(0,s.Lk)("div",{class:(0,c.C4)(["this-year",{selected:(0,v.R1)(d)===(0,v.R1)(l)}]),onClick:a[2]||(a[2]=e=>w(!1))},(0,c.v_)((0,v.R1)(l)),3),(0,s.Lk)("div",{class:(0,c.C4)(["next-year",{selected:(0,v.R1)(d)===(0,v.R1)(l)+1}]),onClick:a[3]||(a[3]=e=>w(!0))},(0,c.v_)((0,v.R1)(l)+1),3)]),(0,s.Lk)("div",Fa,[(0,s.Lk)("div",{class:"mm-change",onClick:a[4]||(a[4]=e=>R(!1))}," < "),(0,s.Lk)("div",Oa,[(0,s.Lk)("div",{class:"mms",style:(0,c.Tr)(S.value)},[Ma,(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:1===(0,v.R1)(C)}])},"Jan",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:2===(0,v.R1)(C)}])},"Feb",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:3===(0,v.R1)(C)}])},"Mar",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:4===(0,v.R1)(C)}])},"Apr",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:5===(0,v.R1)(C)}])},"May",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:6===(0,v.R1)(C)}])},"Jun",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:7===(0,v.R1)(C)}])},"Jul",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:8===(0,v.R1)(C)}])},"Aug",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:9===(0,v.R1)(C)}])},"Sep",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:10===(0,v.R1)(C)}])},"Oct",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:11===(0,v.R1)(C)}])},"Nov",2),(0,s.Lk)("div",{class:(0,c.C4)(["mm-i",{selected:12===(0,v.R1)(C)}])},"Dec",2),Xa],4),Ua]),(0,s.Lk)("div",{class:"mm-change",onClick:a[5]||(a[5]=e=>R(!0))}," > ")]),(0,s.Lk)("div",{class:"edit-date-dd",style:(0,c.Tr)(K.value)},[Da,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,v.R1)(h)+(0,v.R1)(m)<36?35:42,(e=>((0,s.uX)(),(0,s.CE)("div",{key:"dd-j-"+e,class:"dd-j",onClick:a=>E(e-(0,v.R1)(m))},(0,c.v_)(e-(0,v.R1)(m)>0&&e-(0,v.R1)(m)<=(0,v.R1)(h)?e-(0,v.R1)(m):""),9,Ba)))),128))],4)])):(0,s.Q3)("",!0),A.value?((0,s.uX)(),(0,s.CE)("div",Pa,[(0,s.Lk)("div",ja,[(0,s.Lk)("div",{class:"hour-addadd",onClick:a[6]||(a[6]=e=>U(10))}),(0,s.Lk)("div",{class:"hour-add",onClick:a[7]||(a[7]=e=>U(1))}),(0,s.Lk)("div",{class:"hour-min",onClick:a[8]||(a[8]=e=>U(-1))}),(0,s.Lk)("div",{class:"hour-minmin",onClick:a[9]||(a[9]=e=>U(-10))})]),(0,s.Lk)("div",Va,[(0,s.Lk)("div",{class:"edit-time-hour",style:(0,c.Tr)(M.value)},[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(24,(e=>(0,s.Lk)("div",{class:(0,c.C4)(["hour-j",{selected:F.value===24-e}])},(0,c.v_)(String(24-e).padStart(2,"0")),3))),64))],4)]),Ha,(0,s.Lk)("div",Qa,[(0,s.Lk)("div",{class:"edit-time-minute",style:(0,c.Tr)(X.value)},[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(60,(e=>(0,s.Lk)("div",{class:(0,c.C4)(["minute-j",{selected:O.value===60-e}])},(0,c.v_)(String(60-e).padStart(2,"0")),3))),64))],4)]),(0,s.Lk)("div",Na,[(0,s.Lk)("div",{class:"hour-addadd",onClick:a[10]||(a[10]=e=>D(10))}),(0,s.Lk)("div",{class:"hour-add",onClick:a[11]||(a[11]=e=>D(1))}),(0,s.Lk)("div",{class:"hour-min",onClick:a[12]||(a[12]=e=>D(-1))}),(0,s.Lk)("div",{class:"hour-minmin",onClick:a[13]||(a[13]=e=>D(-10))})]),(0,s.Lk)("div",{class:"time-ok",onClick:a[14]||(a[14]=e=>P())}," OK ")])):(0,s.Q3)("",!0),j.value?((0,s.uX)(),(0,s.CE)("div",Wa,Ja)):(0,s.Q3)("",!0),j.value?((0,s.uX)(),(0,s.CE)("div",{key:3,class:"edit-dur-ok",onClick:a[15]||(a[15]=e=>N())},Ga)):(0,s.Q3)("",!0),q.value?((0,s.uX)(),(0,s.CE)("div",Za)):(0,s.Q3)("",!0)],64))}};const at=(0,n.A)(et,[["__scopeId","data-v-193d0e88"]]);var tt=at;function it(e,a){return(0,s.uX)(),(0,s.CE)("div",null," Habits Record ")}const st={},lt=(0,n.A)(st,[["render",it]]);var nt=lt;function ot(e,a){return(0,s.uX)(),(0,s.CE)("div",null," Habits History ")}const dt={},ut=(0,n.A)(dt,[["render",ot]]);var rt=ut;const ct=[{path:"/habitai",component:_e},{path:"/center",component:be},{path:"/myhabitsmenu",component:Pe,children:[{path:"/habitsview",component:sa},{path:"/habitsedit",component:tt},{path:"/habitsrecord",component:nt},{path:"/habitshistory",component:rt}]},{path:"/",redirect:"/habitai"},{path:"/habitsview",component:sa}];var vt=ct;const kt=[{path:"/login",name:"login",component:S},{path:"/mainbox",name:"mainbox",component:Y},{path:"/:pathMatch(.*)*",name:"Notfound",component:ee}],_t=(0,r.aE)({history:(0,r.Bt)(),routes:kt});_t.beforeEach(((e,a,t)=>{"login"===e.name?(m.commit("changeLogin",!1),t()):localStorage.getItem("token")?m.state.is_get_router?t():(ht(),t({path:e.fullPath})):t({path:"/login"})}));const ht=()=>{vt.forEach((e=>{_t.addRoute("mainbox",e)})),m.commit("changeGetRouter",!0)};var mt=_t,pt=t(5587);t(4188);(0,i.Ef)(u).use(pt.A).use(m).use(mt).mount("#app")}},a={};function t(i){var s=a[i];if(void 0!==s)return s.exports;var l=a[i]={exports:{}};return e[i].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,i,s,l){if(!i){var n=1/0;for(r=0;r<e.length;r++){i=e[r][0],s=e[r][1],l=e[r][2];for(var o=!0,d=0;d<i.length;d++)(!1&l||n>=l)&&Object.keys(t.O).every((function(e){return t.O[e](i[d])}))?i.splice(d--,1):(o=!1,l<n&&(n=l));if(o){e.splice(r--,1);var u=s();void 0!==u&&(a=u)}}return a}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[i,s,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,i){var s,l,n=i[0],o=i[1],d=i[2],u=0;if(n.some((function(a){return 0!==e[a]}))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(d)var r=d(t)}for(a&&a(i);u<n.length;u++)l=n[u],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(r)},i=self["webpackChunkadmin"]=self["webpackChunkadmin"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],(function(){return t(8375)}));i=t.O(i)})();
//# sourceMappingURL=app.eef9e377.js.map