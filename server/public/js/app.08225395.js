(function(){"use strict";var e={8452:function(e,n,t){var o=t(5130),a=t(6768);function s(e,n){const t=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(t)}var r=t(1241);const i={},l=(0,r.A)(i,[["render",s]]);var u=l,p=t(1387),c=(t(4114),t(4232)),d=t(144),m=t(4373),g=t(1219);const f=e=>((0,a.Qi)("data-v-f6204ea6"),e=e(),(0,a.jt)(),e),v={class:"body-bg"},h={class:"formContainer_signin"},_=f((()=>(0,a.Lk)("div",{class:"formTitle",style:{"margin-top":"20px"}},"Let's begin!",-1))),k={class:"button-flex-container",style:{"margin-top":"60px"}},b={class:"formContainer_signup"},y=f((()=>(0,a.Lk)("div",{class:"formTitle",style:{"margin-top":"20px"}},"Sign up first!",-1))),w={class:"button-flex-container",style:{"margin-top":"30px"}};var x={__name:"Login",setup(e){const n=(0,d.Kh)({username:"",password:""}),t=(0,d.Kh)({signup_username:"",signup_password_1:"",signup_password_2:""}),s=(0,d.KR)(),r=(0,d.KR)();var i=(0,d.KR)(!0),l=(0,d.KR)(!0),u=(0,d.KR)(!0),f=(0,d.KR)(!0);const x=(0,p.rd)(),L=()=>{s.value.validate((e=>{if(e){if(console.log(n),!n.password||!n.username)return void g.nk.error("Please enter your username and password!");m.A.post("/adminapi/user/login",n).then((e=>{console.log(e.data),"OK"===e.data.ActionType?(localStorage.setItem("token",e.data.token),x.push("/habitai")):g.nk.error("Incorrect username or password!")}))}}))},C=()=>{r.value.validate((e=>{if(e){if(console.log(t),!t.signup_username||!t.signup_password_1||!t.signup_password_2)return void g.nk.error("Please enter your username and password!");if(t.signup_password_1!==t.signup_password_2)return void g.nk.error("Please enter the same password!");m.A.post("/adminapi/user/signup",t).then((e=>{console.log(e.data),"OK"===e.data.ActionType?(g.nk.success("Sin up success! Please sign in again."),setTimeout((()=>{f.value=!0}),2e3)):"REPEAT"===e.data.ActionType&&g.nk.error("This username is already taken.")}))}}))},R=()=>{i.value=!0},A=()=>{i.value=!1},F=()=>{l.value=!0},O=()=>{l.value=!1},T=()=>{u.value=!0},K=()=>{u.value=!1},S=()=>{f.value=!f.value};return(e,p)=>{const m=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.bo)((0,a.Lk)("div",h,[_,(0,a.bF)(m,{ref_key:"signinFormRef",ref:s,model:n,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,d.R1)(i)}]),style:{"margin-bottom":"40px","margin-top":"40px"},onFocus:A,onBlur:R,"onUpdate:modelValue":p[0]||(p[0]=e=>n.username=e),autocomplete:"off",placeholder:"User name"},null,34),[[o.Jo,n.username]]),(0,a.bo)((0,a.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,d.R1)(l)}]),onFocus:O,onBlur:F,"onUpdate:modelValue":p[1]||(p[1]=e=>n.password=e),type:"password",autocomplete:"off",placeholder:"Password"},null,34),[[o.Jo,n.password]])])),_:1},8,["model"]),(0,a.Lk)("div",k,[(0,a.Lk)("button",{class:"sign_button",style:{"margin-right":"50px"},type:"primary",onClick:p[2]||(p[2]=e=>L())}," Sign in "),(0,a.Lk)("button",{class:"sign_button",type:"primary",onClick:p[3]||(p[3]=e=>S())}," Sign up ")])],512),[[o.aG,(0,d.R1)(f)]]),(0,a.bo)((0,a.Lk)("div",b,[y,(0,a.bF)(m,{ref_key:"signupFormRef",ref:r,model:t,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,d.R1)(i)}]),style:{"margin-bottom":"20px","margin-top":"20px"},onFocus:A,onBlur:R,"onUpdate:modelValue":p[4]||(p[4]=e=>t.signup_username=e),autocomplete:"off",placeholder:"User name"},null,34),[[o.Jo,t.signup_username]]),(0,a.bo)((0,a.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,d.R1)(l)}]),style:{"margin-bottom":"20px"},onFocus:O,onBlur:F,"onUpdate:modelValue":p[5]||(p[5]=e=>t.signup_password_1=e),type:"password",autocomplete:"off",placeholder:"Password"},null,34),[[o.Jo,t.signup_password_1]]),(0,a.bo)((0,a.Lk)("input",{class:(0,c.C4)(["input",{"input-shake":(0,d.R1)(u)}]),onFocus:K,onBlur:T,"onUpdate:modelValue":p[6]||(p[6]=e=>t.signup_password_2=e),type:"password",autocomplete:"off",placeholder:"Password again"},null,34),[[o.Jo,t.signup_password_2]])])),_:1},8,["model"]),(0,a.Lk)("div",w,[(0,a.Lk)("button",{class:"sign_button",style:{"margin-right":"50px"},type:"primary",onClick:p[7]||(p[7]=e=>C())}," Ok "),(0,a.Lk)("button",{class:"sign_button",type:"primary",onClick:p[8]||(p[8]=e=>S())}," Back ")])],512),[[o.aG,!(0,d.R1)(f)]])])}}};const L=(0,r.A)(x,[["__scopeId","data-v-f6204ea6"]]);var C=L,R=t(782);var A=(0,R.y$)({state:{is_get_router:!1,is_collapsed:!1},getters:{},mutations:{changeGetRouter(e,n){e.is_get_router=n},changeCollapsed(e,n){e.is_collapsed=n}},actions:{},modules:{}});const F=e=>((0,a.Qi)("data-v-ee80a6b4"),e=e(),(0,a.jt)(),e),O=F((()=>(0,a.Lk)("span",null,"habit AI",-1))),T=[O],K=F((()=>(0,a.Lk)("span",null,"User",-1))),S=[K];var E={__name:"SideMenu",setup(e){const n=(0,p.rd)(),t=()=>{n.push("/habitai"),A.commit("changeCollapsed",!1)},o=()=>{n.push("/center"),A.commit("changeCollapsed",!1)};return(e,n)=>{const s=(0,a.g2)("el-aside");return(0,a.uX)(),(0,a.Wv)(s,null,{default:(0,a.k6)((()=>[(0,a.Lk)("button",{onClick:t},T),(0,a.Lk)("button",{onClick:o},S)])),_:1})}}};const I=(0,r.A)(E,[["__scopeId","data-v-ee80a6b4"]]);var P=I;const B=(0,a.Lk)("span",{class:"overlay-text"},"STICK TO YOUR HABITS",-1),U=[B],j={direction:"vertical"};var q={__name:"MainBox",setup(e){const n=()=>{A.state.is_collapsed?A.commit("changeCollapsed",!1):A.commit("changeCollapsed",!0)};return(e,t)=>{const s=(0,a.g2)("el-header"),r=(0,a.g2)("router-view"),i=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bo)((0,a.Lk)("div",{class:"overlay",onClick:n},U,512),[[o.aG,(0,d.R1)(A).state.is_collapsed]]),(0,a.bF)(o.eB,{name:"slide"},{default:(0,a.k6)((()=>[(0,d.R1)(A).state.is_collapsed?((0,a.uX)(),(0,a.Wv)(P,{key:0,class:(0,c.C4)(["side-menu",{"is-visible":(0,d.R1)(A).state.is_collapsed,"menu-menuIn":(0,d.R1)(A).state.is_collapsed}])},null,8,["class"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.Lk)("button",{onClick:n}," 导航 ")])),_:1}),(0,a.Lk)("div",j,[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(r)])),_:1})])])}}};const M=q;var X=M;function J(e,n){const t=(0,a.g2)("el-empty");return(0,a.uX)(),(0,a.Wv)(t,{description:"404 not found"})}const V={},G=(0,r.A)(V,[["render",J]]);var W=G,H=t(642);const z={style:{"margin-top":"30px","padding-left":"10px","padding-right":"10px"}},Q={style:{"margin-top":"30px","padding-left":"10px","padding-right":"10px"}},$=["loading"],N={style:{color:"green"}},Y={style:{color:"red"}},D=["innerHTML"];var Z={__name:"Home",setup(e){const n=new H.A;var t=(0,d.KR)(!1);const s=(0,d.Kh)({my_question:""});let r="";const i=(0,d.KR)([]),l=[];let u=!1;const p=()=>{let e=s.my_question.trim();s.my_question="",e&&(t.value=!0,m.A.post("/adminapi/user/sendquestion",{question:e},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((n=>{let o=n.data.questionId;if(o){let n=(0,d.KR)(""),a=(0,d.KR)("");i.value.push({user:e,ai:n,ui:a});const s=new EventSource(`/adminapi/user/getanswer/${o}`);s.onmessage=e=>{const n=decodeURIComponent(e.data);console.log(n),l.push(n),u||f()},s.onerror=()=>{console.log(r),s.close(),t.value=!1}}})).catch((e=>{console.error("Error sending question: ",e),g.nk.error("Something error..."),t.value=!1})))},f=()=>{if(0===l.length)return void(u=!1);u=!0;const e=l.shift();let t=0;const o=30,a=10,s=70,p=i.value[i.value.length-1];r+=e;const c=()=>{t<e.length?(p.ai+=e.charAt(t),p.ui=n.render(p.ai),t++,setTimeout(c,Math.max(a,Math.min(s,o-2*e.length)))):f()};c()};return(e,n)=>{const r=(0,a.g2)("el-col"),l=(0,a.g2)("el-row");return(0,a.uX)(),(0,a.CE)("div",z,[(0,a.Lk)("div",Q,[(0,a.bF)(l,{gutter:20},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("input",{style:{"margin-left":"20px"},type:"textarea",placeholder:"请输入内容","onUpdate:modelValue":n[0]||(n[0]=e=>s.my_question=e),maxlength:"500","show-word-limit":"",autosize:{minRows:2},resize:"none"},null,512),[[o.Jo,s.my_question]]),(0,a.bF)(r,{span:8},{default:(0,a.k6)((()=>[(0,a.Lk)("button",{class:"question_button",onClick:p,type:"primary",loading:(0,d.R1)(t)},[(0,a.Lk)("span",null,(0,c.v_)((0,d.R1)(t)?"waiting...":"send"),1)],8,$)])),_:1})])),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.value,((e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n},[(0,a.Lk)("p",N,"我："+(0,c.v_)(e.user),1),(0,a.Lk)("div",Y,[(0,a.eW)("habitAI： "),(0,a.Lk)("div",{innerHTML:e.ui},null,8,D)])])))),128))])])}}};const ee=(0,r.A)(Z,[["__scopeId","data-v-2ca13b8a"]]);var ne=ee;function te(e,n){return(0,a.uX)(),(0,a.CE)("div",null," center ")}const oe={},ae=(0,r.A)(oe,[["render",te]]);var se=ae;const re=[{path:"/habitai",component:ne},{path:"/center",component:se},{path:"/",redirect:"/habitai"}];var ie=re;const le=[{path:"/login",name:"login",component:C},{path:"/mainbox",name:"mainbox",component:X},{path:"/:pathMatch(.*)*",name:"Notfound",component:W}],ue=(0,p.aE)({history:(0,p.Bt)(),routes:le});ue.beforeEach(((e,n,t)=>{"login"===e.name?t():localStorage.getItem("token")?A.state.is_get_router?t():(pe(),t({path:e.fullPath})):t({path:"/login"})}));const pe=()=>{ie.forEach((e=>{ue.addRoute("mainbox",e)})),A.commit("changeGetRouter",!0)};var ce=ue,de=t(5587);t(4188);(0,o.Ef)(u).use(de.A).use(A).use(ce).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var s=n[o]={exports:{}};return e[o].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,s){if(!o){var r=1/0;for(p=0;p<e.length;p++){o=e[p][0],a=e[p][1],s=e[p][2];for(var i=!0,l=0;l<o.length;l++)(!1&s||r>=s)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,s<r&&(r=s));if(i){e.splice(p--,1);var u=a();void 0!==u&&(n=u)}}return n}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[o,a,s]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,s,r=o[0],i=o[1],l=o[2],u=0;if(r.some((function(n){return 0!==e[n]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)var p=l(t)}for(n&&n(o);u<r.length;u++)s=r[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(p)},o=self["webpackChunkadmin"]=self["webpackChunkadmin"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8452)}));o=t.O(o)})();
//# sourceMappingURL=app.08225395.js.map